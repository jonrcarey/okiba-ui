{"version":3,"file":"index.esm.js","sources":["../index.js"],"sourcesContent":["import SizesCache from '@okiba/sizes-cache'\nimport ScrollManager from '@okiba/scroll-manager'\nimport EventManager from '@okiba/event-manager'\n\nexport default class StickyContent {\n  constructor(el, content, opts) {\n    this.opts = opts || {}\n    this.el = el\n    this.content = content\n    this.sizes = SizesCache.get(el)\n    this.onResize()\n    this.listen()\n  }\n\n  enable() {\n    if (this.isEnabled) return\n    this.isEnabled = true\n    this.content.style.transform = `translate3d(0, ${this.y}px, 0)`\n  }\n\n  disable() {\n    if (!this.isEnabled) return\n    this.isEnabled = false\n    this.content.style.transform = ''\n  }\n\n  onScroll = ({y}) => {\n    if (!this.isEnabled) return\n\n    const deltaY = y - this.sizes.top\n\n    if (deltaY <= 0) {\n      this.y = 0\n    } else if (!this.opts.overflow && y > this.limitY)  {\n      this.y = this.maxY\n    } else {\n      this.y = deltaY\n    }\n\n    this.content.style.transform = `translate3d(0, ${this.y}px, 0)`\n  }\n\n  onResize = () => {\n    this.maxY = this.sizes.height - SizesCache.window.height\n    this.limitY = this.sizes.bottom - SizesCache.window.height\n  }\n\n  listen() {\n    EventManager.on('resize', this.onResize)\n    ScrollManager.on('scroll', this.onScroll)\n  }\n}\n"],"names":["StickyContent","el","content","opts","y","isEnabled","deltaY","sizes","top","overflow","limitY","maxY","style","transform","height","SizesCache","window","bottom","get","onResize","listen","EventManager","on","ScrollManager","onScroll"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIqBA;;;yBACPC,EAAZ,EAAgBC,OAAhB,EAAyBC,IAAzB,EAA+B;;;;;sCAqBpB,gBAAS;UAAPC,CAAO,QAAPA,CAAO;UACd,CAAC,KAAI,CAACC,SAAV,EAAqB;UAEfC,MAAM,GAAGF,CAAC,GAAG,KAAI,CAACG,KAAL,CAAWC,GAA9B;;UAEIF,MAAM,IAAI,CAAd,EAAiB;QACf,KAAI,CAACF,CAAL,GAAS,CAAT;OADF,MAEO,IAAI,CAAC,KAAI,CAACD,IAAL,CAAUM,QAAX,IAAuBL,CAAC,GAAG,KAAI,CAACM,MAApC,EAA6C;QAClD,KAAI,CAACN,CAAL,GAAS,KAAI,CAACO,IAAd;OADK,MAEA;QACL,KAAI,CAACP,CAAL,GAASE,MAAT;;;MAGF,KAAI,CAACJ,OAAL,CAAaU,KAAb,CAAmBC,SAAnB,4BAAiD,KAAI,CAACT,CAAtD;KAlC6B;;sCAqCpB,YAAM;MACf,KAAI,CAACO,IAAL,GAAY,KAAI,CAACJ,KAAL,CAAWO,MAAX,GAAoBC,UAAU,CAACC,MAAX,CAAkBF,MAAlD;MACA,KAAI,CAACJ,MAAL,GAAc,KAAI,CAACH,KAAL,CAAWU,MAAX,GAAoBF,UAAU,CAACC,MAAX,CAAkBF,MAApD;KAvC6B;;SACxBX,IAAL,GAAYA,IAAI,IAAI,EAApB;SACKF,EAAL,GAAUA,EAAV;SACKC,OAAL,GAAeA,OAAf;SACKK,KAAL,GAAaQ,UAAU,CAACG,GAAX,CAAejB,EAAf,CAAb;SACKkB,QAAL;SACKC,MAAL;;;;;6BAGO;UACH,KAAKf,SAAT,EAAoB;WACfA,SAAL,GAAiB,IAAjB;WACKH,OAAL,CAAaU,KAAb,CAAmBC,SAAnB,4BAAiD,KAAKT,CAAtD;;;;8BAGQ;UACJ,CAAC,KAAKC,SAAV,EAAqB;WAChBA,SAAL,GAAiB,KAAjB;WACKH,OAAL,CAAaU,KAAb,CAAmBC,SAAnB,GAA+B,EAA/B;;;;6BAwBO;MACPQ,YAAY,CAACC,EAAb,CAAgB,QAAhB,EAA0B,KAAKH,QAA/B;MACAI,aAAa,CAACD,EAAd,CAAiB,QAAjB,EAA2B,KAAKE,QAAhC;;;;;;;;;"}
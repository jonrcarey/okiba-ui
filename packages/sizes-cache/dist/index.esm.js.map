{"version":3,"file":"index.esm.js","sources":["../index.js"],"sourcesContent":["import EventManager from '@okiba/event-manager'\nimport { offset } from '@okiba/dom'\n\nexport default new class SizesCache {\n  constructor() {\n    this.map = new Map()\n    this.listen()\n    this.onResize()\n  }\n\n  get(el) {\n    if (!this.map.has(el)) {\n      this.map.set(el, {})\n      this.compute(el)\n    }\n\n    return this.map.get(el)\n  }\n\n  compute(el) {\n    const sizes = this.map.get(el)\n\n    const {top, left} = offset(el)\n    const width = el.clientWidth\n    const height = el.clientHeight\n\n    sizes.top = top\n    sizes.right = left + width\n    sizes.bottom = top + height\n    sizes.left = left\n    sizes.width = width\n    sizes.height = height\n  }\n\n  onResize = () => {\n    this.window = {\n      width: window.innerWidth,\n      height: window.innerHeight\n    }\n\n    this.body = {\n      width: document.body.offsetWidth,\n      height: document.body.offsetHeight\n    }\n\n    for (const el of this.map.keys()) {\n      this.compute(el)\n    }\n  }\n\n  listen() {\n    EventManager.on('resize', this.onResize)\n  }\n}\n"],"names":["window","width","innerWidth","height","innerHeight","body","document","offsetWidth","offsetHeight","map","keys","el","compute","Map","listen","onResize","has","set","get","sizes","offset","top","left","clientWidth","clientHeight","right","bottom","EventManager","on"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,YAAe;;AAAA;wBACC;;;;;sCA8BH,YAAM;MACf,KAAI,CAACA,MAAL,GAAc;QACZC,KAAK,EAAED,MAAM,CAACE,UADF;QAEZC,MAAM,EAAEH,MAAM,CAACI;OAFjB;MAKA,KAAI,CAACC,IAAL,GAAY;QACVJ,KAAK,EAAEK,QAAQ,CAACD,IAAT,CAAcE,WADX;QAEVJ,MAAM,EAAEG,QAAQ,CAACD,IAAT,CAAcG;OAFxB;;;;;;6BAKiB,KAAI,CAACC,GAAL,CAASC,IAAT,EAAjB,8HAAkC;cAAvBC,EAAuB;;UAChC,KAAI,CAACC,OAAL,CAAaD,EAAb;;;;;;;;;;;;;;;;KA1CU;;SACPF,GAAL,GAAW,IAAII,GAAJ,EAAX;SACKC,MAAL;SACKC,QAAL;;;;;wBAGEJ,EAPS,EAOL;UACF,CAAC,KAAKF,GAAL,CAASO,GAAT,CAAaL,EAAb,CAAL,EAAuB;aAChBF,GAAL,CAASQ,GAAT,CAAaN,EAAb,EAAiB,EAAjB;aACKC,OAAL,CAAaD,EAAb;;;aAGK,KAAKF,GAAL,CAASS,GAAT,CAAaP,EAAb,CAAP;;;;4BAGMA,EAhBK,EAgBD;UACJQ,KAAK,GAAG,KAAKV,GAAL,CAASS,GAAT,CAAaP,EAAb,CAAd;;oBAEoBS,MAAM,CAACT,EAAD,CAHhB;UAGHU,GAHG,WAGHA,GAHG;UAGEC,IAHF,WAGEA,IAHF;;UAIJrB,KAAK,GAAGU,EAAE,CAACY,WAAjB;UACMpB,MAAM,GAAGQ,EAAE,CAACa,YAAlB;MAEAL,KAAK,CAACE,GAAN,GAAYA,GAAZ;MACAF,KAAK,CAACM,KAAN,GAAcH,IAAI,GAAGrB,KAArB;MACAkB,KAAK,CAACO,MAAN,GAAeL,GAAG,GAAGlB,MAArB;MACAgB,KAAK,CAACG,IAAN,GAAaA,IAAb;MACAH,KAAK,CAAClB,KAAN,GAAcA,KAAd;MACAkB,KAAK,CAAChB,MAAN,GAAeA,MAAf;;;;6BAmBO;MACPwB,YAAY,CAACC,EAAb,CAAgB,QAAhB,EAA0B,KAAKb,QAA/B;;;;;aAhDJ;;;;"}
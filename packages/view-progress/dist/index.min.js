var OkibaViewProgress=function(){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hs={}}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,[{key:"on",value:function(e,t){(this.hs[e]||(this.hs[e]=[])).push(t)}},{key:"off",value:function(e,t){if(this.hs[e]){var n=this.hs[e].indexOf(t);n<0||this.hs[e].splice(n,1)}}},{key:"emit",value:function(e,t){if(this.hs&&this.hs[e])for(var n=0;n<this.hs[e].length;++n)this.hs[e][n](t)}},{key:"destroy",value:function(){var r=this;Object.entries(this.hs).forEach(function(e){var t=l(e,2),n=t[0];return t[1].forEach(function(e){return r.off(n,e)})}),delete this.hs}}]),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y,t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hs={}}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(e,[{key:"on",value:function(e,t){(this.hs[e]||(this.hs[e]=[])).push(t)}},{key:"off",value:function(e,t){if(this.hs[e]){var n=this.hs[e].indexOf(t);n<0||this.hs[e].splice(n,1)}}},{key:"emit",value:function(e,t){if(this.hs&&this.hs[e])for(var n=0;n<this.hs[e].length;++n)this.hs[e][n](t)}},{key:"destroy",value:function(){var r=this;Object.entries(this.hs).forEach(function(e){var t=p(e,2),n=t[0];return t[1].forEach(function(e){return r.off(n,e)})}),delete this.hs}}]),e}(),b={};Object.defineProperties(b,{check:{get:function(){if(void 0!==y)return y;function e(){}var t=Object.defineProperty({},"passive",{get:function(){y=!0}});return window.addEventListener("_",e,t),window.removeEventListener("_",e,t),y}}});Object.defineProperties({},{check:{get:function(){return"ontouchstart"in window}}});var d=b.check;function v(e){return void 0===e?e:e instanceof Array?e:e.callee||e instanceof NodeList||e instanceof DOMTokenList?Array.prototype.slice.call(e):[e]}function w(e,t,n,r){return function(e,t,n,r,o){if(!t||!n)return!1;for(var i=v(e),a=v(t),u=v(n),f=0;f<i.length;++f)for(var c=0;c<a.length;++c)i[f]["".concat(r,"EventListener")](a[c],u[Math.min(c,u.length-1)],o);return!0}(e,t,n,"add",r)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var P=new(function(){function e(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(Y(t=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?Y(e):t}(this,m(e).call(this))),"onRaf",function(e){t.emit("raf",e),requestAnimationFrame(t.onRaf)}),O(Y(t),"onResize",function(){t.emit("resize",{width:window.innerWidth,height:window.innerHeight})}),O(Y(t),"onScroll",function(e){t.emit("scroll",e)}),t.listen(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(e,t),function(e,t,n){t&&g(e.prototype,t),n&&g(e,n)}(e,[{key:"listen",value:function(){requestAnimationFrame(this.onRaf),w(window,"resize",this.onResize,!!d&&{passive:!0,capture:!1}),w(window,"scroll",this.onScroll,!!d&&{passive:!0,capture:!1})}}]),e}());function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=new(function(){function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"onResize",function(){a.window={width:window.innerWidth,height:window.innerHeight};var e=!0,t=!(a.body={width:document.body.offsetWidth,height:document.body.offsetHeight}),n=void 0;try{for(var r,o=a.map.keys()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;a.compute(i)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}),this.map=new Map,this.listen(),this.onResize()}return function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(e,[{key:"get",value:function(e){return this.map.has(e)||(this.map.set(e,{}),this.compute(e)),this.map.get(e)}},{key:"compute",value:function(e){var t=this.map.get(e),n=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!==e.tagName?e.scrollLeft:0),n+=e.offsetTop-("BODY"!==e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:n,left:t}}(e),r=n.top,o=n.left,i=e.clientWidth,a=e.clientHeight;t.top=r,t.right=o+i,t.bottom=r+a,t.left=o,t.width=i,t.height=a}},{key:"listen",value:function(){P.on("resize",this.onResize)}}]),e}());function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hs={}}return function(e,t,n){t&&_(e.prototype,t),n&&_(e,n)}(e,[{key:"on",value:function(e,t){(this.hs[e]||(this.hs[e]=[])).push(t)}},{key:"off",value:function(e,t){if(this.hs[e]){var n=this.hs[e].indexOf(t);n<0||this.hs[e].splice(n,1)}}},{key:"emit",value:function(e,t){if(this.hs&&this.hs[e])for(var n=0;n<this.hs[e].length;++n)this.hs[e][n](t)}},{key:"destroy",value:function(){var r=this;Object.entries(this.hs).forEach(function(e){var t=S(e,2),n=t[0];return t[1].forEach(function(e){return r.off(n,e)})}),delete this.hs}}]),e}();function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var C=new(function(){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),z(A(e=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?A(e):t}(this,L(t).call(this))),"onRaf",function(){e.isEnabled&&e.lerpY!==e.targetY&&(e.deltaLerpY=e.lerpY,e.lerpY=function(e,t,n){return(t-e)*n+e}(e.lerpY,e.targetY,.1),e.deltaLerpY-=e.lerpY,Math.abs(e.deltaLerpY)<.02&&(e.lerpY=e.targetY,e.deltaLerpY=0),e.emit("scroll",{y:~~e.lerpY,delta:e.deltaLerpY,acceleration:e.deltaLerpY/E.window.height}))}),z(A(e),"onChange",function(){e.deltaY=(window.scrollY||window.pageYOffset)-e.targetY,e.targetY+=e.deltaY,e.isEnabled||e.emit("scroll",{y:e.targetY,delta:e.deltaY,acceleration:e.deltaY/E.window.height})}),e.targetY=e.lerpY=window.scrollY||window.pageYOffset,e.emit("scroll",{y:e.targetY,delta:0,acceleration:0}),e.listen(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,T),function(e,t,n){t&&R(e.prototype,t),n&&R(e,n)}(t,[{key:"disable",value:function(){this.isEnabled&&(this.isEnabled=!1)}},{key:"enable",value:function(){this.isEnabled||(this.isEnabled=!0)}},{key:"listen",value:function(){P.on("raf",this.onRaf),P.on("scroll",this.onChange),P.on("resize",this.onChange)}}]),t}());return function(){function n(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),a(c(i=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}(this,o(n).call(this))),"onScroll",function(e){var t=e.y,n=f(e,["y"]);if(i.opts.overflow||i.isInside||!(t<i.startY||t>i.endY)){var r=function(e,t,n,r,o){return(e-t)*(o-r)/(n-t)+r}(t,i.startY,i.endY,0,1),o=0<=r&&r<=1;o!==i.isInside&&(o?i.emit("enter"):i.emit("exit")),i.isInside=o,i.emit("progress",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({progress:r,isInside:o},n,{y:t}))}}),a(c(i),"onResize",function(){var e=i.sizes,t=e.top,n=e.height;i.startY=t-E.window.height,i.endY=i.startY+n+E.window.height,i.endY>=E.body.height&&(i.endY=i.startY+n),i.startY<0&&(i.startY=0,i.endY=n)}),i.opts=t||{},i.el=e,i.sizes=E.get(e),i.isInside=!1,i.onResize(),i.listen(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(n,[{key:"listen",value:function(){C.on("scroll",this.onScroll),P.on("resize",this.onResize)}}]),n}()}();
